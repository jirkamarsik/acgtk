**************************************************************************
*                                                                        *
*                 ACG development toolkit                                *
*                                                                        *
*                  Copyright 2008 INRIA                                  *
*                                                                        *
*  More information on "http://acg.gforge.inria.fr/"                     *
*  License: CeCILL, see the LICENSE file or "http://www.cecill.info"     *
*  Authors: see the AUTHORS file                                         *
*                                                                        *
*                                                                        *
*                                                                        *
*                                                                        *
*  $Rev::                              $:  Revision of last commit       *
*  $Author::                           $:  Author of last commit         *
*  $Date::                             $:  Date of last commit           *
*                                                                        *
**************************************************************************

*****************
* Prerequisites *
*****************

In order to compile the ACG toolkit, you need:
	+ ocaml (>=3.07) installed (http://caml.inria.fr/)
	+ dypgen (>=20080925) installed (http://dypgen.free.fr/)
	+ bolt (>=1.4) installed (http://bolt.x9c.fr/downloads.html


=======
IMPORTANT:

A fast an easy way to install dypgen and all important ocaml libraries is
to use "opam" (http://opam.ocaml.org/).

The installation typically goes that way:
    + first install OCaml using your prefered distribution/packaging mode
    + then install opam
    + then install dypgen with the command
      	   opam install dypgen
    + then install bolt with the command
      	   opam install bolt
    + don't forget to add the required library in your path
      (look at "Initializing opam" at 
      http://opam.ocaml.org/doc/Advanced_Install.html)
    + then continue with the ACG toolkit installation



To install the ACG toolkit, first run:

	./configure

NOTE: if your dypgen installation is not in a standard location, run:

	 ./configure --help

It will tell you:
"Some influential environment variables:
  DYPGEN_PATH Directory where to find dypgen if not in a standard location
  DYPGENLIB_PATH
              Directory where to find dypgen library if not in a standard
              location

Use these variables to override the choices made by `configure' or to help
it to find libraries and programs with nonstandard names/locations."

For instance, run:
	
	./configure DYPGEN_PATH=/my/dypgen/installation/path/dypgen DYPGENLIB_PATH=/my/dypgen/installation/path/dyplib

Then run:

	make byte

to get the bytecode executable, or

	make opt

to get native code binaries

It should produce two executables in the current directory: acgc (or
acgc.opt for the native code executable) and acg (or acg.opt for the
native code executable).

If you wan to install it (use ./configure --help to set the
installation directory if you don't want to have it in
/usr/local/bin), run:

	make install

If you wan to uninstall it then run:

	make uninstall

********************
** ACG emacs mode **
********************

There is an ACG emacs mode (acg.el) in the emacs directory.

** Quick way to have it work:

copy the following lines in your .emacs

(setq load-path (cons "EMACS_DIR_PATH" load-path))
(setq auto-mode-alist (cons '("\\.acg" . acg-mode) auto-mode-alist))
(autoload 'acg-mode "acg" "Major mode for editing ACG definitions" t)

where EMACS_DIR_PATH is the path of a directory where you copied acg.el (typically)

Note:

	+ you can install the acg.el file into any directory
	specifying the EMACS_PATH while invoking the ./configure
	command.

	Default is PREFIX/share/emacs/site-lisp/acg

	+ If you installed acgtk using opam, then the default path is
	OPAM_REPOSITORY/OCAML_VERSION/share/acg



** Site distribution:

copy acg.el under an acg directory in your site-lisp directory
(typically /usr/share/emacs/site-lisp/)

create a 50acg.el file into the /etc/emacs/site-start.d directory and
copy the following lines in it:

(setq load-path (cons "EMACS_DIR_PATH" load-path))
(setq auto-mode-alist (cons '("\\.acg" . acg-mode) auto-mode-alist))
(autoload 'acg-mode "acg" "Major mode for editing ACG definitions" t)

where now EMACS_DIR_PATH is the acg directory in your site-lisp
directory (typically /usr/share/emacs/site-lisp/acg)



*********************
** For developpers **
*********************

You can get the documented API in all ./src subdirectories getting
there and running:

	make doc

It will create a doc subdirectory with htm files.
