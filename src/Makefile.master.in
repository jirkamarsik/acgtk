##########################################################################
#                                                                        #
#                 ACG development toolkit                                #
#                                                                        #
#                  Copyright 2008 INRIA                                  #
#                                                                        #
#  More information on "http://acg.gforge.loria.fr/"                     #
#  License: CeCILL, see the LICENSE file or "http://www.cecill.info"     #
#  Authors: see the AUTHORS file                                         #
#                                                                        #
#                                                                        #
#                                                                        #
#                                                                        #
#  $Rev::                              $:  Revision of last commit       #
#  $Author::                           $:  Author of last commit         #
#  $Date::                             $:  Date of last commit           #
#                                                                        #
##########################################################################

DEBUGFLAG   = -g
OCAMLCPOPT = -p fm

# All warnings are treated as errors
WARNINGS = @OCAML09WARNINGS@ -warn-error A
COMMONFLAGS= $(WARNINGS) @TYPES@
BYTEFLAGS = $(COMMONFLAGS) $(DEBUGFLAG)
OPTFLAGS = $(COMMONFLAGS)
LFLAGS= -a


TITLE="The ACG Development Toolkit Documentation"
OCAMLDOC_FLAGS = -sort -keep-code -html -t $(TITLE)
#CAMLDOC_FLAGS = -html -t $(TITLE)

LIBS = @CAMLP4_LIB@
LIBDIR = -I +camlp4

OCAMLPP_ARG= pa_extend.cmo pa_macro.cmo $(DEBUGFLAGS) @OCAMLP4_LOC@
OCAMLPP = -pp "@OCAMLP4@ $(OCAMLPP_ARG)"
ifeq ($(strip @KAPUTT_PP@),)
KAPUTT_OCAMLPP = $(OCAMLPP)
else
KAPUTT_OCAMLPP = -pp "@KAPUTT_PP@ off @OCAMLP4@ $(OCAMLPP_ARG)"
endif

@SET_MAKE@

# Make byte the very first target
byte: 

config:
	pushd ../.. && ./configure && popd
